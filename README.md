# artifact-submit-action

This is a GitHub Action used to validate artifacts submitted to Ace Archive and
upload submitted artifact files to the site.

Artifact submissions are JSON files in
[acearchive/artifact-submissions](https://github.com/acearchive/artifact-submissions)
which are generated by a form on the Ace Archive site. This action does the
following:

- Validates the syntax of artifact submission against a schema.
- Downloads files which do not have a file hash or a media type in their
submission and updates the job's local clone of the repo to add them. A later
step in the job can then commit these changes back to the repo.
- Uploads files to Ace Archive.

Artifact files are stored in [Cloudflare
R2](https://developers.cloudflare.com/r2) and artifact metadata is stored in
[Workers KV](https://developers.cloudflare.com/workers/learning/how-kv-works).
Before a file is uploaded to R2, its hash is validated against the hash included
in the JSON submission file to ensure it has not changed since it was manually
reviewed.

See the [`action.yaml`](./action.yaml) for documentation of the input
parameters. See
[acearchive/artifact-submissions](https://github.com/acearchive/artifact-submissions/tree/main/.github/workflows)
for an example of this action in use.
